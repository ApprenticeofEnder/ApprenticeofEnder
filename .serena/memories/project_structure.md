# Project Structure

```
/
├── flake.nix                    # Root flake: inputs and outputs
├── flake.lock                   # Pinned dependency versions
├── devenv.nix                   # Dev shell for THIS repo
├── devenv.yaml                  # devenv input config
├── devenv.lock                  # devenv lock file
├── justfile                     # Task runner commands
├── vira.hs                      # CI pipeline config
├── .envrc                       # direnv (loads devenv + Pulumi ESC secrets)
├── .vale.ini                    # Prose linting config
├── .pre-commit-config.yaml      # Generated by git-hooks.nix (DO NOT MODIFY)
├── .gitmodules                  # Git submodule for neovim config
├── .devenv.flake.nix            # devenv-generated flake (DO NOT MODIFY)
├── README.md                    # GitHub profile README (generated)
│
├── configurations/              # Per-machine/per-user top-level configs
│   ├── home/
│   │   ├── ender.nix            # Generic Linux user (Rust, Python, JS toolkits)
│   │   ├── ender@ender-hornet.nix  # Linux + AI server + all toolkits
│   │   └── robertbabaev.nix     # macOS user
│   └── darwin/
│       └── Roberts-Macbook-Air-2.nix  # macOS system config (nix-darwin)
│
├── modules/                     # Modular Nix configuration (heart of the project)
│   ├── flake/                   # Flake-level modules (autowired by nixos-unified)
│   │   ├── toplevel.nix         # Formatter (alejandra), `nix run` activation
│   │   ├── activate-home.nix    # Home-manager activation (user@host -> user@ fallback)
│   │   └── devshell.nix         # Dev shell config
│   │
│   ├── shared/nix/              # Shared between NixOS/darwin and home-manager
│   │   ├── default.nix          # Entry point for shared nix modules
│   │   └── settings.nix         # Binary cache substituters and trusted keys
│   │
│   ├── home/                    # home-manager modules (auto-imported via default.nix)
│   │   ├── default.nix          # Auto-imports all sibling .nix files
│   │   ├── home.nix             # Base home config (shell aliases)
│   │   ├── me.nix               # Custom `me` option (username, fullname, email)
│   │   ├── nix.nix              # Nix/nixpkgs config (Lix, overlays, unfree, unstable)
│   │   ├── packages.nix         # All home packages (grouped: dev, security, devops, utility, etc.)
│   │   ├── git.nix              # Git config (difftastic, aliases)
│   │   ├── shell.nix            # Shell programs (bash, zoxide)
│   │   ├── targets.nix          # Platform-specific targets
│   │   ├── fonts.nix            # Font configuration
│   │   ├── direnv.nix           # direnv config
│   │   ├── nix-index.nix        # nix-index for command-not-found
│   │   ├── gc.nix               # Nix garbage collection
│   │   │
│   │   ├── programs/            # Individual program configs (auto-imported via default.nix)
│   │   │   ├── default.nix      # Auto-imports siblings, excludes linux-only/ and darwin-only/
│   │   │   │
│   │   │   │  # Shell & Terminal
│   │   │   ├── fish/            # Fish shell config
│   │   │   ├── zsh/             # Zsh config
│   │   │   ├── starship/        # Starship prompt (stow-managed dotfile)
│   │   │   ├── kitty/           # Kitty terminal (Nord theme)
│   │   │   ├── fastfetch/       # System info display
│   │   │   ├── btop/            # System resource monitor (Nordic theme)
│   │   │   │
│   │   │   │  # AI & Dev Tooling
│   │   │   ├── opencode.nix     # OpenCode AI assistant
│   │   │   ├── mcp.nix          # Model Context Protocol servers
│   │   │   ├── neovim/          # Neovim (stow-managed config)
│   │   │   ├── vscode.nix       # VS Code / VSCodium (Linux only)
│   │   │   ├── gcc.nix          # GCC compiler
│   │   │   ├── go.nix           # Go toolchain
│   │   │   │
│   │   │   │  # TUI Tools
│   │   │   ├── lazygit.nix      # Git TUI
│   │   │   ├── lazydocker.nix   # Docker TUI
│   │   │   ├── lazysql.nix      # SQL TUI
│   │   │   ├── yazi.nix         # File manager TUI (with many plugins)
│   │   │   ├── television.nix   # Fuzzy finder/picker TUI
│   │   │   ├── spotify-player.nix  # Spotify TUI client
│   │   │   ├── tiny.nix         # IRC client (Libera.Chat, OFTC)
│   │   │   ├── presenterm/      # Terminal presentation tool
│   │   │   │
│   │   │   │  # CLI Tools
│   │   │   ├── fzf.nix, fd.nix, bat.nix, eza.nix, ripgrep.nix, jq.nix
│   │   │   ├── nix-search-tv.nix  # Nix package search (with television)
│   │   │   ├── nh.nix           # Nix helper CLI
│   │   │   ├── pandoc.nix       # Document converter
│   │   │   ├── home-manager.nix # home-manager self-management
│   │   │   │
│   │   │   │  # Security & Networking
│   │   │   ├── ssh.nix, gpg.nix, rbw.nix  # SSH, GPG, Bitwarden CLI
│   │   │   ├── password-store.nix  # pass (Unix password store)
│   │   │   ├── netbird.nix      # WireGuard VPN mesh
│   │   │   │
│   │   │   │  # Email
│   │   │   ├── mu.nix           # Maildir indexer
│   │   │   ├── msmtp.nix        # SMTP client
│   │   │   │
│   │   │   ├── linux-only/      # Linux-specific programs
│   │   │   │   ├── default.nix  # Auto-imports siblings
│   │   │   │   ├── ghostty/     # Ghostty terminal (Nord theme, Fish shell)
│   │   │   │   ├── abcde/       # CD ripper (udev rules, Fish functions, ntfy notifications)
│   │   │   │   ├── onlyoffice.nix, obsidian.nix, obs-studio.nix
│   │   │   │   ├── mpv.nix, lutris.nix, sftpman.nix
│   │   │   │   └── (obsidian is disabled by default)
│   │   │   │
│   │   │   └── darwin-only/     # macOS-specific programs
│   │   │       └── default.nix  # Auto-imports siblings
│   │   │
│   │   ├── toolkits/            # Language toolkits (imported per-configuration, NOT auto-imported)
│   │   │   ├── default.nix      # Empty placeholder
│   │   │   ├── rust.nix         # Rust toolchain
│   │   │   ├── python.nix       # Python toolchain
│   │   │   ├── javascript.nix   # JavaScript/Node toolchain
│   │   │   └── ai-server.nix    # AI server (Ollama + CUDA)
│   │   │
│   │   ├── services/            # systemd/launchd services (auto-imported)
│   │   │   ├── default.nix      # Auto-imports siblings (excludes .bak files)
│   │   │   ├── gpg-agent.nix    # GPG agent (SSH support, pinentry-tty)
│   │   │   ├── ssh-agent.nix    # SSH agent (Linux only)
│   │   │   ├── spotifyd.nix     # Spotify daemon (Linux only)
│   │   │   ├── redshift.nix     # Screen color temp (Linux, dawn/dusk)
│   │   │   ├── cachix-agent.nix # Cachix agent (disabled)
│   │   │   ├── tldr.nix         # TLDR pages auto-update
│   │   │   ├── remmina.nix      # Remote desktop (Linux only)
│   │   │   ├── podman.nix       # Container runtime (Linux only)
│   │   │   ├── ntfy.nix         # Push notifications (placeholder)
│   │   │   ├── ntfy.bak.nix     # Backup of previous ntfy config (excluded)
│   │   │   └── systemd.nix      # Systemd user services (placeholder)
│   │   │
│   │   ├── scripts/             # Custom shell scripts
│   │   │   ├── default.nix      # Builds scripts via writeShellScriptBin
│   │   │   ├── yls.sh           # Custom yls script
│   │   │   └── fit.sh           # Custom fit script
│   │   │
│   │   └── files/               # Static files placed into home directory
│   │       ├── default.nix      # Places files via home.file
│   │       └── op.sh            # 1Password CLI plugin aliases (aws, gh)
│   │
│   ├── darwin/                  # nix-darwin modules
│   │   ├── default.nix          # Imports common/ subdirectory
│   │   ├── homebrew.nix         # Homebrew packages/casks (possibly orphaned)
│   │   └── common/
│   │       ├── default.nix      # Imports myusers.nix
│   │       └── myusers.nix      # Auto-discovers users, wires home-manager
│   │
│   └── nixos/                   # NixOS modules
│       └── common/
│           ├── default.nix      # Imports myusers.nix
│           └── myusers.nix      # Auto-discovers users, wires home-manager
│
├── dotfiles/                    # Dotfiles managed via GNU Stow
│   ├── nvim/                    # Neovim config (git submodule)
│   └── starship/                # Starship prompt config
│
├── templates/                   # README generation templates (Jinja2)
│   ├── README.j2.md             # Main README template
│   ├── techtable.j2.html        # Tech stack table template
│   ├── readme.json              # Template data
│   └── README.md                # Template README/docs
│
└── styles/                      # Vale prose linting styles
    ├── config/
    ├── proselint/
    └── write-good/
```
